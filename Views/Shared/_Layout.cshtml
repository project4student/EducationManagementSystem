@inject SignInManager<Users> signInManager;
@inject UserManager<Users> userManager;
@{
	var contoller = (User.IsInRole("Student")) ? "Student" : "Teacher";
}
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>@(ViewBag.PageTitle!=null ? ViewBag.PageTitle+" | Education Management System":"Education Management System")
	</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css">
	<link rel="stylesheet" href="~/CSS/_comman.css" asp-append-version="true">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
	<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
		integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />
	<link rel="shortcut icon" href="~/Images/favicon.ico" type="image/x-icon">
	@RenderSection("CSS",false)
</head>

<body>
	<nav class="navbar navbar-expand-lg navbar-light bg-warning sticky-top">
		<div class="container-fluid"><a class="navbar-brand fs-big" href="/"> <img src="/Images/logo.png" /></a><label
				class="navbar-toggler border-0 p-0 hamburgerLabel" type="button" for="ham" data-bs-toggle="collapse"
				data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
				aria-label="Toggle navigation"><input id="ham" hidden
					type="checkbox" /><span></span><span></span><span></span></label>
			<div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
				<ul class="navbar-nav mb-2 mb-lg-0">
					@if (signInManager.IsSignedIn(User))
					{
						@if (!User.IsInRole("Admin"))
						{
							<li class="nav-item"><a
							class="nav-link btn btn-outline-danger btn-sm border-0 me-0 me-lg-2 px-2 py-1"
							aria-current="page" asp-controller="@contoller" asp-action="Index">Dashboard</a></li>
						}
						else
						{
							<li class="nav-item"><a
							class="nav-link btn btn-outline-danger btn-sm border-0 me-0 me-lg-2 px-2 py-1"
							aria-current="page" asp-controller="Account" asp-action="CreateUser">Add User</a></li>
							<li class="nav-item"><a
							class="nav-link btn btn-outline-danger btn-sm border-0 me-0 me-lg-2 px-2 py-1"
							aria-current="page" asp-controller="Admin" asp-action="AssignSubject">Assign Subjects</a>
							</li>
							<li class="nav-item"><a
							class="nav-link btn btn-outline-danger btn-sm border-0 me-0 me-lg-2 px-2 py-1"
							aria-current="page" asp-controller="Admin" asp-action="AddSchedules">Upload Schedules</a>
							</li>
							<li class="nav-item"><a
							class="nav-link btn btn-outline-danger btn-sm border-0 me-0 me-lg-2 px-2 py-1"
							aria-current="page" asp-controller="Admin" asp-action="GetScheduleList">Uploaded
									Schedules</a>
							</li>

						}
						<li class="nav-item"><a
							class="nav-link btn btn-outline-danger btn-sm border-0 me-0 me-lg-2 px-2 py-1"
							aria-current="page" asp-controller="Account" asp-action="Logout">Logout</a></li>
					}
					else
					{
						<li class="nav-item"><a
							class="nav-link btn btn-outline-danger btn-sm border-0 me-0 me-lg-2 px-2 py-1"
							aria-current="page" asp-controller="Account" asp-action="Login">Login</a></li>
					}
				</ul>
			</div>
		</div>
	</nav>
	<div class="position-fixed toast-container bottom-0 end-0 p-3">
		<div class="toast align-items-center text-white border-0 fade" role="alert" aria-live="assertive"
			aria-atomic="true">
			<div class="d-flex">
				<div class="toast-body text-dark"></div><button class="btn-close btn-close-dark me-2 m-auto"
					type="button" data-bs-dismiss="toast" aria-label="Close"></button>
			</div>
		</div>
	</div>
	<div class="loader d-none flex-column align-items-center justify-content-center position-fixed top-0 start-0 vh-100 vw-100"
		id="loaderContainer">
		<div class="mosaic-loader">
			@for (int i = 0; i < 4; i++)
			{
				@for (int j = 0; j < 4; j++)
				{
					<div class="cell d-@(i + j)"></div>
				}
			}
		</div>
		<h5 class="my-3">Loading ...</h5>
	</div>
	@RenderBody()
	<div class="container-fluid bg-warning py-4 p-0">
		<div class="container">
			<footer
				class="d-flex flex-wrap justify-content-between align-items-center py-3 border-bottom border-success border-2">
				<div class="col-md-4 d-flex align-items-center"><a
						class="mb-3 me-2 mb-md-0 text-muted text-decoration-none lh-1" asp-controller="Home"
						asp-action="Index"><img class="footerImg" src="~/Images/footerLogo.png" /></a><span
						class="text-dark">&copy; 2021 It Hub, Inc</span>
				</div>
				<ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
					<li class="ms-3"><a href="#"><i class="bi bi-twitter text-dark fs-big"></i></a></li>
					<li class="ms-3"><a href="#"><i class="bi bi-instagram text-dark fs-big"></i></a></li>
					<li class="ms-3"><a href="#"><i class="bi bi-facebook text-dark fs-big"></i></a></li>
				</ul>
			</footer>
		</div>
	</div>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
	crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
	integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
	crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.12/jquery.validate.unobtrusive.min.js"></script>
<script src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>
<script>
	const body = document.querySelector("body");
	const loading = (isLoading) => (isLoading) ? body.classList.add("loading") : body.classList.remove("loading");
	loading(true);
	document.onreadystatechange = () => {
		if (document.readyState === "complete") loading(false)
	}

	const toastHtml = document.querySelector(".toast");
	const toastBtn = document.querySelector("button.btn-close");
	const toastBody = toastHtml.querySelector(".toast-body");
	const toast = bootstrap.Toast.getOrCreateInstance(toastHtml);

	const showToast = (toastType, message) => {
		const cl = toastHtml.classList.toString().match(/bg-[a-z]*/);
		if (cl) {
			toastHtml.classList.remove(cl[0]);
		}
		toastHtml.classList.add(`bg-${toastType}`);
		toastBody.innerHTML = message;
		toast.show();
		setTimeout(() => {
			toastHtml.classList.remove(`bg-${toastType}`);
			toast.hide();
		}, 5000);
	};
</script>
@RenderSection("CustomScripts",required:false)

</html>